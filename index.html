<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Neural Ether | Connected AI</title>
    <style>
        :root {
            --bg-dark: #050508;
            --accent: #00f2ff;
            --glass: rgba(255, 255, 255, 0.05);
            --border: rgba(255, 255, 255, 0.1);
        }

        body {
            margin: 0; background: var(--bg-dark); color: white;
            font-family: 'Segoe UI', sans-serif; height: 100vh; display: flex;
        }

        /* تصميم الشاشة */
        .chat-container {
            flex: 1; display: flex; flex-direction: column;
            position: relative; overflow: hidden;
        }

        #chat-stream {
            flex: 1; overflow-y: auto; padding: 50px 15%;
            scroll-behavior: smooth;
        }

        .message { margin-bottom: 25px; animation: fadeInUp 0.5s ease; }
        .user-msg { color: var(--accent); font-weight: bold; font-size: 1.2rem; }
        .bot-msg { color: #ccc; line-height: 1.7; background: var(--glass); padding: 20px; border-radius: 15px; border-left: 3px solid var(--accent); }

        /* منطقة الإدخال */
        .input-area {
            padding: 30px 15%; background: linear-gradient(transparent, var(--bg-dark));
        }

        .input-wrapper {
            display: flex; background: var(--glass); border: 1px solid var(--border);
            padding: 10px 20px; border-radius: 30px; backdrop-filter: blur(10px);
        }

        input {
            flex: 1; background: transparent; border: none; color: white;
            font-size: 1rem; outline: none; padding: 10px;
        }

        .send-btn {
            background: var(--accent); border: none; border-radius: 50%;
            width: 40px; height: 40px; cursor: pointer; transition: 0.3s;
        }

        .send-btn:hover { transform: scale(1.1); box-shadow: 0 0 15px var(--accent); }

        /* لودينج "التفكير" */
        .thinking { display: none; color: var(--accent); font-style: italic; margin-bottom: 10px; }

        @keyframes fadeInUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div class="chat-container">
    <div id="chat-stream">
        <div class="message bot-msg">أنا الآن متصل بعقلي السحابي.. اسألني أي شيء وسأجيبك بذكاء خارق.</div>
    </div>

    <div class="input-area">
        <div id="status" class="thinking">جاري استدعاء المعرفة...</div>
        <div class="input-wrapper">
            <input type="text" id="userInput" placeholder="اكتب سؤالك هنا...">
            <button class="send-btn" onclick="askAI()">⚡</button>
        </div>
    </div>
</div>

<script>
    const API_KEY = "AIzaSyCfkcBg0PrlXlpXxVvfHRYFx-8jh8aOKkU"; // استبدله بمفتاحك الجديد

    async function askAI() {
        const inputField = document.getElementById('userInput');
        const stream = document.getElementById('chat-stream');
        const status = document.getElementById('status');
        const prompt = inputField.value;

        if (!prompt) return;

        // إضافة سؤال المستخدم للواجهة
        stream.innerHTML += `<div class="message user-msg">● ${prompt}</div>`;
        inputField.value = "";
        status.style.display = "block";
        stream.scrollTop = stream.scrollHeight;

        try {
            const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${API_KEY}`, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                    contents: [{ parts: [{ text: prompt }] }]
                })
            });

            const data = await response.json();
            const aiText = data.candidates[0].content.parts[0].text;

            // إضافة رد البوت
            status.style.display = "none";
            const botDiv = document.createElement('div');
            botDiv.className = 'message bot-msg';
            stream.appendChild(botDiv);
            
            // تأثير الكتابة المتدرجة
            let i = 0;
            const interval = setInterval(() => {
                botDiv.textContent += aiText[i];
                i++;
                if (i >= aiText.length) clearInterval(interval);
                stream.scrollTop = stream.scrollHeight;
            }, 10);

        } catch (error) {
            status.textContent = "حدث خطأ في الاتصال بالعقل الرقمي.";
            console.error(error);
        }
    }

    // دعم زر Enter
    document.getElementById('userInput').addEventListener('keypress', (e) => {
        if (e.key === 'Enter') askAI();
    });
</script>

</body>
</html>
